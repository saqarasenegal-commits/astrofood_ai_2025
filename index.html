<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AstroFood Premium Gold ‚Äì Chef‚ÄëAI</title>
  <meta name="description" content="AstroFood Premium Gold: recettes IA par signe (FR/EN/AR), packs payants, QR WhatsApp." />
  <meta name="theme-color" content="#0f172a" />
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/assets/icon-192.png" sizes="192x192">
  <style>
    :root { --gold:#FBBF24; --amber:#f59e0b; --bg: radial-gradient(circle at top, #0f172a, #020617 65%); }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:#fff;font-family:system-ui,-apple-system,'Segoe UI',Roboto,sans-serif;min-height:100vh;display:flex;flex-direction:column}
    header{padding:1rem 1.25rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(251,191,36,.22);background:rgba(2,6,23,.35);position:sticky;top:0;backdrop-filter:blur(10px)}
    .brand{display:flex;gap:.7rem;align-items:center}
    .logo{width:42px;height:42px;border-radius:12px;background:linear-gradient(120deg,var(--gold),var(--amber));box-shadow:0 0 0 3px rgba(251,191,36,.12);display:grid;place-items:center;font-weight:800;color:#111}
    .title{font-weight:800;letter-spacing:.2px}
    .langs{display:flex;gap:.4rem}
    .lang-btn{background:transparent;border:1px solid rgba(251,191,36,.25);color:#fff;cursor:pointer;padding:.35rem .7rem;border-radius:.55rem;font-size:.85rem}
    .lang-btn.active{background:rgba(251,191,36,.12);color:var(--gold)}
    main{width:min(1100px,100%);margin:1.25rem auto 3rem;padding:0 1rem;display:grid;gap:1rem}
    .hero{display:grid;gap:1rem;grid-template-columns:1.1fr .9fr;align-items:center}
    .hero h1{font-size:clamp(1.7rem,3.1vw,2.5rem);margin:.2rem 0}
    .muted{color:rgba(255,255,255,.65)}
    .btn{background:linear-gradient(120deg,var(--gold),var(--amber));border:none;color:#111827;padding:.6rem 1rem;border-radius:.65rem;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;gap:.4rem;text-decoration:none}
    .btn.outline{background:transparent;border:1px solid rgba(251,191,36,.35);color:#fff}
    .card{background:rgba(2,6,23,.5);border:1px solid rgba(251,191,36,.2);border-radius:16px;padding:1rem}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
    .grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}
    .price{background:rgba(251,191,36,.06);border:1px solid rgba(251,191,36,.2);border-radius:14px;padding:1rem;text-align:center}
    .price h3{margin:.4rem 0;color:var(--gold)}
    .price .amount{font-size:1.6rem;font-weight:800;color:#fff}
    .ai-out{white-space:pre-wrap;min-height:120px;border:1px dashed rgba(251,191,36,.25);border-radius:12px;padding:.8rem;margin-top:.6rem}
    .qr{background:rgba(255,255,255,.9);border-radius:.8rem;display:grid;place-items:center;width:140px;height:140px;margin:.4rem auto}
    footer{opacity:.7;text-align:center;padding:1rem;font-size:.85rem}
    @media (max-width:960px){.hero{grid-template-columns:1fr}.grid2,.grid3{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">AF</div>
      <div>
        <div class="title" data-i18n-fr="AstroFood Premium Gold" data-i18n-en="AstroFood Premium Gold" data-i18n-ar="ÿ£ÿ≥ÿ™ÿ±ŸàŸÅŸàÿØ ÿ®ÿ±ŸäŸÖŸäŸàŸÖ ÿ¨ŸàŸÑÿØ">AstroFood Premium Gold</div>
        <div class="muted" data-i18n-fr="Recettes IA par signe" data-i18n-en="AI recipes by zodiac" data-i18n-ar="ŸàÿµŸÅÿßÿ™ ÿ®ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ÿ≠ÿ≥ÿ® ÿßŸÑÿ£ÿ®ÿ±ÿßÿ¨">Recettes IA par signe</div>
      </div>
    </div>
    <div class="langs">
      <button class="lang-btn active" data-lang="fr">FR</button>
      <button class="lang-btn" data-lang="en">EN</button>
      <button class="lang-btn" data-lang="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero card">
      <div>
        <h1 data-i18n-fr="Cuisine guid√©e par les astres" data-i18n-en="Cooking guided by the stars" data-i18n-ar="ŸÖÿ∑ÿ®ÿÆŸÉ ŸàŸÅŸÇ ÿ≠ÿ±ŸÉÿ© ÿßŸÑŸÉŸàÿßŸÉÿ®">Cuisine guid√©e par les astres</h1>
        <p class="muted" data-i18n-fr="Choisis ton signe et ta langue : l‚ÄôIA propose 3 repas + boissons + carte t√©l√©chargeable." data-i18n-en="Choose your sign & language: AI suggests 3 meals + drinks + a downloadable card." data-i18n-ar="ÿßÿÆÿ™ÿ± ÿ®ÿ±ÿ¨ŸÉ ŸàŸÑÿ∫ÿ™ŸÉ: ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ŸäŸÇÿ™ÿ±ÿ≠ 3 Ÿàÿ¨ÿ®ÿßÿ™ + ŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™ + ÿ®ÿ∑ÿßŸÇÿ© ŸÇÿßÿ®ŸÑÿ© ŸÑŸÑÿ™ŸÜÿ≤ŸäŸÑ.">Choisis ton signe et ta langue : l‚ÄôIA propose 3 repas + boissons + carte t√©l√©chargeable.</p>
        <div style="display:flex;gap:.6rem;flex-wrap:wrap;margin-top:.6rem">
          <a class="btn" href="#ai">üöÄ <span data-i18n-fr="Lancer Chef‚ÄëAI" data-i18n-en="Start Chef‚ÄëAI" data-i18n-ar="ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ¥ŸäŸÅ‚ÄëAI">Lancer Chef‚ÄëAI</span></a>
          <a class="btn outline" href="#pricing">üí≥ <span data-i18n-fr="Packs & achats" data-i18n-en="Packs & purchase" data-i18n-ar="ÿßŸÑÿ®ÿßŸÇÿßÿ™ ŸàÿßŸÑÿ¥ÿ±ÿßÿ°">Packs & achats</span></a>
        </div>
      </div>
      <div class="card" style="text-align:center">
        <div class="muted" style="margin-bottom:.3rem" data-i18n-fr="WhatsApp direct" data-i18n-en="Direct WhatsApp" data-i18n-ar="Ÿàÿßÿ™ÿ≥ÿßÿ® ŸÖÿ®ÿßÿ¥ÿ±">WhatsApp direct</div>
        <div class="qr">
          <img src="https://api.qrserver.com/v1/create-qr-code/?size=140x140&data=https://wa.me/221786599051" width="140" height="140" alt="QR WhatsApp" />
        </div>
        <div style="font-size:.8rem;color:var(--gold);letter-spacing:.05em">+221 78 659 90 51</div>
      </div>
    </section>

    <!-- AI SECTION -->
    <section id="ai" class="card">
      <h2 style="color:var(--gold)" data-i18n-fr="Assistant Chef‚ÄëAI" data-i18n-en="Chef‚ÄëAI Assistant" data-i18n-ar="ŸÖÿ≥ÿßÿπÿØ ÿßŸÑÿ¥ŸäŸÅ‚ÄëAI">Assistant Chef‚ÄëAI</h2>
      <div class="grid2">
        <div>
          <label data-i18n-fr="Votre signe" data-i18n-en="Your sign" data-i18n-ar="ÿ®ÿ±ÿ¨ŸÉ"></label>
          <select id="sign">
            <option>B√©lier</option><option>Taureau</option><option>G√©meaux</option>
            <option>Cancer</option><option>Lion</option><option>Vierge</option>
            <option>Balance</option><option>Scorpion</option><option>Sagittaire</option>
            <option>Capricorne</option><option>Verseau</option><option>Poissons</option>
          </select>
        </div>
        <div>
          <label data-i18n-fr="Langue" data-i18n-en="Language" data-i18n-ar="ÿßŸÑŸÑÿ∫ÿ©"></label>
          <select id="lang">
            <option value="fr">Fran√ßais</option>
            <option value="en">English</option>
            <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
          </select>
        </div>
      </div>
      <button class="btn" id="btn-recipe" style="margin-top:.7rem">üç≥ <span data-i18n-fr="G√©n√©rer" data-i18n-en="Generate" data-i18n-ar="ÿ•ŸÜÿ¥ÿßÿ°">G√©n√©rer</span></button>
      <div id="ai-output" class="ai-out">Pr√™t.</div>
      <div style="margin-top:.6rem">
      <a class="btn" id="open-digital-card" href="#">üìá Afficher la carte digitale</a>

      </div>
    </section>

    <!-- PRICING -->
    <section id="pricing" class="card">
      <h2 style="color:#fff" data-i18n-fr="Packs Premium" data-i18n-en="Premium Packs" data-i18n-ar="ÿßŸÑÿ®ÿßŸÇÿßÿ™ ÿßŸÑŸÖŸÖŸäÿ≤ÿ©">Packs Premium</h2>
      <div class="grid3">
        <div class="price">
          <h3>Starter</h3>
          <div class="amount">5,99 ‚Ç¨</div>
          <p class="muted">12 cartes digitales (1 par signe) ‚Äì FR</p>
          <a class="btn" href="https://astrofoody.lemonsqueezy.com" target="_blank" rel="noopener">Acheter</a>
        </div>
        <div class="price" style="border:2px solid var(--gold)">
          <h3>Premium Gold</h3>
          <div class="amount">14,99 ‚Ç¨</div>
          <p class="muted">36 cartes (FR/EN/AR) + recettes IA illimit√©es</p>
          <a class="btn" href="https://astrofoody.lemonsqueezy.com" target="_blank" rel="noopener">Acheter</a>
        </div>
        <div class="price">
          <h3>Business</h3>
          <div class="amount">49,00 ‚Ç¨</div>
          <p class="muted">Licence boutique + mod√®les marketing</p>
          <a class="btn" href="https://astrofoody.lemonsqueezy.com" target="_blank" rel="noopener">Acheter</a>
        </div>
      </div>
    </section>
  </main>

  <footer>¬© AstroFood Premium Gold ‚Ä¢ PWA ‚Ä¢ Vercel Ready</footer>

  <script>
    // Multilang toggle
    function setLang(lang){
      document.querySelectorAll('[data-i18n-fr]').forEach(el=>{
        const fr = el.getAttribute('data-i18n-fr');
        const en = el.getAttribute('data-i18n-en');
        const ar = el.getAttribute('data-i18n-ar');
        if(lang==='fr') el.textContent = fr;
        if(lang==='en') el.textContent = en;
        if(lang==='ar') el.textContent = ar;
      });
      if(lang==='ar'){
        document.documentElement.lang='ar';
        document.body.dir='rtl';
        document.body.style.fontFamily="'Cairo',sans-serif";
      }else{
        document.documentElement.lang = lang==='en'?'en':'fr';
        document.body.dir='ltr';
        document.body.style.fontFamily="system-ui,-apple-system,'Segoe UI',Roboto,sans-serif";
      }
    }
    document.querySelectorAll('.lang-btn').forEach(b=>{
      b.addEventListener('click',()=>{
        document.querySelectorAll('.lang-btn').forEach(x=>x.classList.remove('active'));
        b.classList.add('active');
        setLang(b.dataset.lang);
      });
    });

    // API hook
    const API_URL = "/api/astrofood-ai";
    const out = document.getElementById("ai-output");
    document.getElementById("btn-recipe").addEventListener("click", async ()=>{
      const sign = document.getElementById("sign").value;
      const lang = document.getElementById("lang").value;
      out.textContent = "üç≥ G√©n√©ration‚Ä¶";
      try{
        const r = await fetch(API_URL, {
          method:"POST",
          headers:{ "Content-Type":"application/json" },
          body: JSON.stringify({ sign, lang, mode:"recipe" })
        });
        const data = await r.json();
        out.textContent = data.text || "‚ö†Ô∏è Pas de texte re√ßu.";
      }catch(e){
        out.textContent = "‚ùå Erreur front : "+e.message;
      }  
      
    document.getElementById('open-digital-card').addEventListener('click', () => {
      // Exemple : r√©cup√©rer les donn√©es d√©j√† pr√©sentes dans la page principale
      const sign = document.getElementById('sign')?.value || 'Lion';
      const recipe = document.getElementById('recipe-name')?.innerText || 'Poulet Yassa S√©n√©galais';

      // Construire une URL avec les param√®tres
      const url = `/card.html?sign=${encodeURIComponent(sign)}&recipe=${encodeURIComponent(recipe)}`;
      window.open(url, '_blank');
    });
  </script>
</body>
</html>
